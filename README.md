# Blockchain key-vault to store and protect your secrets üîè

This project showcases a truly decentralized data vault on Ethereum.

All the packages required for launching the project can be installed in each `packages` repository divided in two:

- Buidler: Containing all the smart-contract logic and its tests.

- frontend/react_vault: Containing the React front-end and its IPFS deployer.


## How it works?

Each vault has a public seed (or salt) value; This value is used for users to generate an HD wallet.

The HD wallet used for encrypting/decrypting messages is generated with a signed message of the public vault seed as a mnemonic.
Once the wallet is generated, a private and public key can be derived and used in a secured manner locally.

Another secret key is used on the contract, but the latter is never visible; it is saved inside an encrypted message that can only be revelead with the associated private-key derived from the seed. If a user is whitelisted inside the vault, he can retreive the encrypted secret key, and decrypt it off-chain with their derived private-key to then interact with the vault and append new secrets.

The first owner of the vault can add new users by encrypted the secret key with the public-key of users who share to teh owner their derived public-key. These new users must connect to the vault, even if they're not allowed, in order to get the correct derived public-key generated by their Metamask wallet.


## How to install?

### Smart-contracts

The contracts are built with solidity 0.6.0.
The tests on the other hand are built on Buidler with the ethers plugin in TypeScript.

Go inside the Buidler folder, and get the proper node version:

```
nvm use
```

Afterwards, install the dependencies:

```
npm install
```

Then, generate the typechains:

```
npm run build
```

and you can then test and deploy the contracts:

```
npm run test
npx buidler run --network rinkeby scripts/deploy.ts
```

### Front-end

The front-end is built with create-react-app with TypeScript support.

To run the project, set the proper node version and install all the dependencies:

```
nvm use
yarn install
```

And then add the `./artifacts` folder from the buidler one to the `./src` of the React project to allow ethers to properly interact on Ethereum.
You can also update the `initialFactoryAddress` varaible inside `.App.tsx`, to change the KeyVaultFactory to interact with if you use a different network.
By default, it is set on a KeyVaultFactory on Ropsten.

Once this is done, you can launch the project:

```
yarn start
```

To deploy the front on IPFS, simply run:

```
yarn run ipfs
```

## Demo
The demo is currently available here on Ropsten network: https://bafybeighflkdx64udpuknrjyidmvhhsgowx7eqxylyi2psipia6l6rl62y.ipfs.infura-ipfs.io/
